import{Router}from"./router/router.js";import{Navigation}from"./components/navigation.js";import{Footer}from"./components/footer.js";class LumexApp{constructor(){this.router=null;this.navigation=null;this.footer=null;this.init()}async init(){console.log("Initializing Lumex App...");try{await this.waitForDOM();this.initializeComponents();this.setupEventListeners();await this.router.init();console.log("App initialized successfully")}catch(error){console.error("Failed to initialize app:",error)}}waitForDOM(){return new Promise(resolve=>{if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",resolve)}else{resolve()}})}initializeComponents(){this.navigation=new Navigation;this.footer=new Footer;this.router=new Router}setupEventListeners(){document.addEventListener("click",event=>{const routeElement=event.target.closest("[data-route]");if(routeElement){event.preventDefault();const route=routeElement.getAttribute("data-route");if(route){this.router.navigateTo(route)}}});window.addEventListener("popstate",()=>{const route=this.router.getCurrentRouteFromURL();this.router.navigateTo(route,false)});document.addEventListener("submit",event=>{if(event.target.id==="career-form"){event.preventDefault();this.handleCareerFormSubmission(event.target)}})}async handleCareerFormSubmission(form){try{const formData=new FormData(form);const{FormValidator:FormValidator}=await import("./utils/validation.js");const validator=new FormValidator;const validationResult=validator.validateCareerForm(formData);if(!validationResult.isValid){validator.displayErrors(validationResult.errors);return}validator.clearErrors();const submitButton=form.querySelector('button[type="submit"]');const originalText=submitButton.textContent;submitButton.textContent="Submitting...";submitButton.disabled=true;await this.submitToGoogleForms(form,formData);this.showSuccessMessage();form.reset()}catch(error){console.error("Form submission error:",error);alert("There was an error submitting your application. Please try again.")}finally{const submitButton=form.querySelector('button[type="submit"]');if(submitButton){submitButton.textContent="Submit Application";submitButton.disabled=false}}}async submitToGoogleForms(form,formData){try{await new Promise(resolve=>setTimeout(resolve,1500));console.log("Form data submitted:",Object.fromEntries(formData))}catch(error){console.error("Form submission failed:",error);throw error}}showSuccessMessage(){const form=document.getElementById("career-form");const successMessage=document.getElementById("success-message");if(form&&successMessage){form.style.display="none";successMessage.style.display="block";successMessage.scrollIntoView({behavior:"smooth",block:"center"});setTimeout(()=>{successMessage.style.display="none";form.style.display="block"},1e4)}}}new LumexApp;